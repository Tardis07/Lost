(function(ag){var ah=ag(window),ai,aa,an=-1,am,M,I,aj,L,K,ab,ae=!window.XMLHttpRequest,U=[],Q=document.documentElement,Y={},ad=new Image(),ac=new Image(),T,S,R,ao,af,W;ag(function(){ag("body").append(ag([T=ag('<div id="lbOverlay" />').click(V)[0],S=ag('<div id="lbCenter" />')[0]]).css("display","none"));R=ag('<div id="lbImage" />').appendTo(S).append(ao=ag('<div style="position: relative;" />').append([af=ag('<a id="lbPrevLink" href="#" />').click(al)[0],W=ag('<a id="lbNextLink" href="#" />').click(N)[0]])[0])[0]});ag.slimbox=function(a,b,c){ai=ag.extend({loop:false,overlayOpacity:0.95,overlayFadeDuration:400,resizeDuration:400,resizeEasing:"swing",initialWidth:250,initialHeight:250,imageFadeDuration:400,closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78]},c);if(typeof a=="string"){a=[[a,b]];b=0}L=ah.scrollTop()+(ah.height()/2);K=ai.initialWidth;ab=ai.initialHeight;ag(S).css({top:Math.max(0,L-(ab/2))-120,width:K,height:ab,marginLeft:-K/2}).show();aj=ae||(T.currentStyle&&(T.currentStyle.position!="fixed"));if(aj){T.style.position="absolute"}ag(T).css("opacity",ai.overlayOpacity).fadeIn(ai.overlayFadeDuration);O();P(1);aa=a;ai.loop=ai.loop&&(aa.length>1);return Z(b)};ag.fn.slimbox=function(d,a,b){a=a||function(e){return[e.href,e.title]};b=b||function(){return true};var c=this;return c.unbind("click").click(function(){var g=this,e=0,f,i=0,h;f=ag.grep(c,function(j,k){return b.call(g,j,k)});for(h=f.length;i<h;++i){if(f[i]==g){e=i}f[i]=a(f[i],i)}return ag.slimbox(f,e,d)})};function O(){var a=ah.scrollLeft(),b=ah.width();ag([S]).css("left",a+(b/2));if(aj){ag(T).css({left:a,top:ah.scrollTop(),width:b,height:ah.height()})}}function P(b){if(b){ag("object").add(ae?"select":"embed").each(function(d,c){U[d]=[c,c.style.visibility];c.style.visibility="hidden"})}else{ag.each(U,function(d,c){c[0].style.visibility=c[1]});U=[]}var a=b?"bind":"unbind";ah[a]("scroll resize",O);ag(document)[a]("keydown",X)}function X(a){var b=a.which,c=ag.inArray;return(c(b,ai.closeKeys)>=0)?V():(c(b,ai.nextKeys)>=0)?N():(c(b,ai.previousKeys)>=0)?al():null}function al(){return Z(M)}function N(){return Z(I)}function Z(a){if(a>=0){an=a;am=aa[an][0];M=(an||(ai.loop?aa.length:0))-1;I=((an+1)%aa.length)||(ai.loop?0:-1);J();S.className="lbLoading";showLoadingBar();Y=new Image();Y.onload=ak;Y.src=am}return false}function ak(){S.className="";hideLoadingBar();ag(R).css({backgroundImage:"url("+am+")",visibility:"hidden",display:"","background-size":"100%"});var a=Y.width,d=Y.height,c=ah.width(),b=ah.height();if(a>=c||d>=b){if(c>=b){ag(ao).width(b*0.8*a/d);ag([ao,af,W]).height(b*0.8)}else{ag(ao).width(c*0.8);ag([ao,af,W]).height(c*0.8*d/a)}}else{ag(ao).width(Y.width);ag([ao,af,W]).height(Y.height)}if(M>=0){ad.src=aa[M][0]}if(I>=0){ac.src=aa[I][0]}K=R.offsetWidth;ab=R.offsetHeight;var e=Math.max(0,L-(ab/2));if(S.offsetHeight!=ab){ag(S).animate({height:ab,top:e},ai.resizeDuration,ai.resizeEasing)}if(S.offsetWidth!=K){ag(S).animate({width:K,marginLeft:-K/2},ai.resizeDuration,ai.resizeEasing)}ag(S).queue(function(){ag(R).css({display:"none",visibility:"",opacity:""}).fadeIn(ai.imageFadeDuration,ap)})}function ap(){if(M>=0){ag(af).show()}if(I>=0){ag(W).show()}}function J(){Y.onload=null;Y.src=ad.src=ac.src=am;ag([S,R]).stop(true);ag([af,W,R]).hide()}function V(){if(an>=0){J();an=M=I=-1;ag(S).hide();ag(T).stop().fadeOut(ai.overlayFadeDuration,P);hideLoadingBar()}return false}})(jQuery);jQuery(document).ready(initSlim());function initSlim(){jQuery(".slimbox").slimbox()}jQuery.fn.postLike=function(){if($(this).hasClass("done")){showNotice("您已经赞过啦！");return false}else{$(this).addClass("done");var c=$(this).data("id"),b=$(this).children(".love-count");var a={action:"lo_like",um_id:c};$.post(ajax.ajax_url,a,function(d){$(b).html(d)});return false}};$(document).on("click",".favorite",function(){$(this).postLike()});jQuery(document).ready(function(e){var j=e("#commentform"),d='<div id="loading"><img src="'+ajax.gif+'">正在提交, 请稍候...</div>',b='<div id="error">#</div>',a='">提交成功',t=', 刷新页面之前可以<a rel="nofollow" href="#edit" onclick=\'return addComment.moveForm("',r=")'>再编辑</a>",c="取消编辑",l,h=1,m=e("#comments-title span"),g=e("#cancel-comment-reply-link"),u=g.text(),q=e("#commentform #submit");q.attr("disabled",false),$body=(window.opera)?(document.compatMode=="CSS1Compat"?e("html"):e("body")):e("html,body"),comm_array=[];comm_array.push("");e("#textarea_label").after(d+b);e("#loading").hide();e("#error").hide();e(document).on("submit","#commentform",function(){if(l){e("#comment").after('<input type="text" name="edit_id" id="edit_id" value="'+l+'" style="display:none;" />')}i();q.attr("disabled",true).fadeTo("slow",0.5);e("#loading").slideDown();showLoadingBar();e.ajax({url:ajax.ajax_url,data:e(this).serialize()+"&action=ajax_comment",type:e(this).attr("method"),error:function(v){e("#loading").hide();hideLoadingBar();showNotice("提交评论失败");e("#error").slideDown().html(v.responseText);setTimeout(function(){q.attr("disabled",false).fadeTo("slow",1);e("#error").slideUp()},3000)},success:function(B){if(e(".reply-to-read").length>0){var v={action:"ajax_post_content",id:e("#comment_post_ID").attr("value"),};e.post(ajax.ajax_url,v,function(D){e(".entry-content").html(D)})}e("#loading").hide();e(".content-header-none .respond-overlay").fadeOut(300);hideLoadingBar();showNotice("成功提交评论");comm_array.push(e("#comment").val());e("textarea").each(function(){this.value=""});var y=addComment,A=y.I("cancel-comment-reply-link"),w=y.I("wp-temp-form-div"),C=y.I(y.respondId),x=y.I("comment_post_ID").value,z=y.I("comment_parent").value;if(!l&&m.length){n=parseInt(m.text().match(/\d+/));m.text(m.text().replace(n,n+1))}new_htm='" id="new_comm_'+h+'"></';new_htm=(z=="0")?('\n<ol style="clear:both;" class="commentlist'+new_htm+"ol>"):('\n<ul class="children'+new_htm+"ul>");ok_htm='\n<div class="ajax-notice" id="success_'+h+a;div_=(document.body.innerHTML.indexOf("div-comment-")==-1)?"":((document.body.innerHTML.indexOf("li-comment-")==-1)?"div-":"");ok_htm=ok_htm.concat(t,div_,"comment-",z,'", "',z,'", "respond", "',x,'", ',h,r);ok_htm+="</span><span></span>\n";ok_htm+="</div>\n";e(".responses").before(new_htm);e("#new_comm_"+h).append(B);$body.animate({scrollTop:e("#new_comm_"+h).offset().top-200},900);k();h++;l="";e("*").remove("#edit_id");A.style.display="none";A.onclick=null;y.I("comment_parent").value="0";if(w&&C){w.parentNode.insertBefore(C,w);w.parentNode.removeChild(w)}}});return false});addComment={moveForm:function(y,z,D,x,A){var H=this,v,C=H.I(y),w=H.I(D),G=H.I("cancel-comment-reply-link"),E=H.I("comment_parent"),F=H.I("comment_post_ID");if(l){o()}A?(H.I("comment").value=comm_array[A],l=H.I("new_comm_"+A).innerHTML.match(/(comment-)(\d+)/)[2],$new_sucs=e("#success_"+A),$new_sucs.hide(),$new_comm=e("#new_comm_"+A),$new_comm.hide(),g.text(c)):g.text(u);H.respondId=D;x=x||false;if(!H.I("wp-temp-form-div")){v=document.createElement("div");v.id="wp-temp-form-div";v.style.display="none";w.parentNode.insertBefore(v,w)}!C?(temp=H.I("wp-temp-form-div"),H.I("comment_parent").value="0",temp.parentNode.insertBefore(w,temp),temp.parentNode.removeChild(temp)):C.parentNode.insertBefore(w,C.nextSibling);$body.animate({scrollTop:e("#respond").offset().top-180},400);if(F&&x){F.value=x}E.value=z;G.style.display="";G.onclick=function(){if(l){o()}var J=addComment,I=J.I("wp-temp-form-div"),K=J.I(J.respondId);J.I("comment_parent").value="0";if(I&&K){I.parentNode.insertBefore(K,I);I.parentNode.removeChild(I)}this.style.display="none";this.onclick=null;return false};try{H.I("comment").focus()}catch(B){}return false},I:function(v){return document.getElementById(v)}};function o(){$new_comm.show();$new_sucs.show();e("textarea").each(function(){this.value=""});l=""}var p=15,f=q.val();function k(){if(p>0){q.val(p);p--;setTimeout(k,1000)}else{q.val(f).attr("disabled",false).fadeTo("slow",1);p=15}}function i(){var x="",v=e("#comment").val(),y=v.indexOf("<code>"),w=v.indexOf("</code>");if(y>-1&&w>-1&&y<w){x="";while(w!=-1){x+=v.substring(0,y+6)+v.substring(y+6,w).replace(/<(?=[^>]*?>)/gi,"&lt;").replace(/>/gi,"&gt;");v=v.substring(w+7,v.length);y=v.indexOf("<code>")==-1?-6:v.indexOf("<code>");w=v.indexOf("</code>");if(w==-1){x+="</code>"+v;e("#comment").val(x)}else{if(y==-6){myFielde+="&lt;/code&gt;"}else{x+="</code>"}}}}var v=x?x:e("#comment").val(),x="",y=v.indexOf("<pre>"),w=v.indexOf("</pre>");if(y>-1&&w>-1&&y<w){x=x}else{return}while(w!=-1){x+=v.substring(0,y+5)+v.substring(y+5,w).replace(/<(?=[^>]*?>)/gi,"&lt;").replace(/>/gi,"&gt;");v=v.substring(w+6,v.length);y=v.indexOf("<pre>")==-1?-5:v.indexOf("<pre>");w=v.indexOf("</pre>");if(w==-1){x+="</pre>"+v;e("#comment").val(x)}else{if(y==-5){myFielde+="&lt;/pre&gt;"}else{x+="</pre>"}}}}function s(w){var v;w=" "+w+" ";if(document.getElementById("comment")&&document.getElementById("comment").type=="textarea"){v=document.getElementById("comment")}else{return false}if(document.selection){v.focus();sel=document.selection.createRange();sel.text=w;v.focus()}else{if(v.selectionStart||v.selectionStart=="0"){var z=v.selectionStart;var y=v.selectionEnd;var x=y;v.value=v.value.substring(0,z)+w+v.value.substring(y,v.value.length);x+=w.length;v.focus();v.selectionStart=x;v.selectionEnd=x}else{v.value+=w;v.focus()}}}});$(document).on("click",".commentnav a",function(){showLoadingBar();var c=$(this).attr("href"),e=$(".commentshow"),f=$(this).parent().data("postid"),d=1,b=$("#cancel-comment-reply-link");/comment-page-/i.test(c)?d=c.split(/comment-page-/i)[1].split(/(\/|#|&).*jQuery/)[0]:/cpage=/i.test(c)&&(d=c.split(/cpage=/)[1].split(/(\/|#|&).*jQuery/)[0]);b.click();d=d.split("#")[0];var a={action:"ajax_comment_page_nav",um_post:f,um_page:d};e.html("<div>loading..</div>");jQuery("body, html").animate({scrollTop:e.offset().top-150},1000);jQuery.post(ajax.ajax_url,a,function(g){e.html(g);$("body, html").animate({scrollTop:e.offset().top-50},1000);hideLoadingBar()});return false});jQuery(window).scroll(function(){jQuery(this).scrollTop()>800?jQuery("#gotop").css({bottom:"80px"}):jQuery("#gotop").css({bottom:"-80px"})});jQuery("#gotop").click(function(){return jQuery("body,html").animate({scrollTop:1},800),!1});jQuery(document).on("click",".show-form",function(){jQuery("#comment-info").toggle(300)});function showNotice(a){clearNotice();$("body").append('<div class="notice">'+a+"</div>");setTimeout("clearNotice()",2000)}function clearNotice(){if($(".notice").length>0){$(".notice").remove()}}function showLoadingBar(){$(".loading-bar").show()}function hideLoadingBar(){$(".loading-bar").hide()}var _last=0;jQuery(window).scroll(function(){var a=jQuery(this).scrollTop();if(a<_last&&a>200){jQuery("#header").removeClass("slideUp");jQuery("#header").removeClass("standard");jQuery("#header").addClass("slideDown")}else{if(a>_last&&a>200){jQuery("#header").removeClass("slideDown");jQuery("#header").removeClass("standard");jQuery("#header").addClass("slideUp")}else{jQuery("#header").removeClass("slideUp");jQuery("#header").removeClass("slideDown");jQuery("#header").addClass("standard")}}_last=jQuery(this).scrollTop()});$(window).load(function(){hideLoadingBar()});jQuery(document).ready(function(a){});